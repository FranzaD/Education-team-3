


I have all the necessary data sets but when I'm joining them using inner join the 
data set gets bigger which doesn't make sense considering what inner join is 
supposed to do. Besides that I have all the items you asked for but idk why like media_tech_all has 1056 observations:/

```{r}
library(forcats)
library(haven)
library(readxl)
library(ggplot2)
library(tidyverse)
library(dplyr)
library(janitor)
library(ggcorrplot)
library(here)
```


The datasets that we need include media and pls
```{r}
media_tech_w1 <- read_dta("../data/wave-1-(9-mo)/10_MT_w1.dta") %>% 
  filter( pargen == 0)

media_tech_w4 <- read_dta("../data/wave-4-(18-mo)/BB2_W4-MT.dta") %>% 
  filter( pargen == 0)

media_tech_w6 <- read_dta("../data/wave-6-(24-mo)/BB2_W6-MT.dta") %>% 
  filter( pargen == 0)
```

```{r}
ignore <- inner_join(media_tech_w1, media_tech_w4, by = c("childid"), suffix = c("_w1", "_w4"))

media_tech_all <- inner_join(ignore, media_tech_w6, by = c("childid"))
```

```{r}
media_tech_all <- media_tech_all %>% 
  select(childid, mt05c_w1, mt05c_w4, mt05c_w6 = mt05c, mt05d_w1, mt05d_w4, mt05d_w6= mt05d,  mtz05jz_w1, mtz05jz_w4, mtz05jz_w6 = mtz05jz)
```

```{r}
pls_w1 <- read_dta("../data/wave-1-(9-mo)/26_PLS_w1.dta") %>% 
  filter( pargen == 0)

pls_w4 <- read_excel("../data/wave-4-(18-mo)/PLS_W4_Final.xlsx") %>% 
  filter( pargen == 0)

pls_w6 <- read_excel("../data/wave-6-(24-mo)/PLS_W6.xlsx") %>%
  clean_names() %>% 
  filter( pargen_mom_0_dad_1 == 0) %>% 
  rename(pargen = pargen_mom_0_dad_1)
```

```{r}
ignore_pls <- inner_join(pls_w1, pls_w4, by = c("childid"), suffix = c("_w1", "_w4"))

pls_all <- full_join(ignore_pls, pls_w6, by = c("childid"))

```

```{r}
pls_all <- pls_all %>% 
  select(childid, plsecpr_w1, plsecpr_w4, plsecpr_w6 = plsecpr, plsacpr_w1, plsacpr_w4, plsacpr_w6 = plsacpr) 
```

```{r}
done <- inner_join(pls_all, media_tech_all, by = c("childid")) 

done <- done %>% 
  mutate(ml_mean_w1 = (mt05c_w1 + mt05d_w1 + mtz05jz_w1)/3,
         ml_mean_w4 = (mt05c_w4 + mt05d_w4 + mtz05jz_w4)/3,
         ml_mean_w6 = (mt05c_w6 + mt05d_w6 + mtz05jz_w6)/3,
         plspr_mean_w1 = (plsecpr_w1 + plsacpr_w1)/2,
         plspr_mean_w4 = (plsecpr_w4 + plsacpr_w4)/2,
         plspr_mean_w6 = (plsecpr_w6 + plsacpr_w6)/2) %>% 
  glimpse()
```
Alrighty, so let's fix the datatypes, something that has helped me in the past is using the zap_labels(column_name) function to get rid of the double+label type, and then converting them with the as.factor() or as.numeric() functions. Then all NA's should just be NA, and for the missing data codes (-111, -222, etc) let's just turn them into NA.

```{r}
install.packages("naniar")
library(naniar)

done <- done %>% 
  zap_labels(mt05c_w1, mt05c_w4, mt05c_w6, mt05d_w1, mt05d_w4, mt05d_w6, mtz05jz_w1, mtz05jz_w4, mtz05jz_w6)
  
done <- done %>% 
  mutate(plsecpr_w1 = as.integer(plsecpr_w1),
         plsecpr_w4 = as.integer(plsecpr_w4),
         plsecpr_w6 = as.integer(plsecpr_w6),
         plsacpr_w1 = as.integer(plsacpr_w1),
         plsacpr_w4 = as.integer(plsacpr_w4),
         plsacpr_w6 = as.integer(plsacpr_w6),
         mt05c_w1 = as.integer(mt05c_w1),
         mt05c_w4 = as.integer(mt05c_w4),
         mt05c_w6 = as.integer(mt05c_w6),
         mt05d_w1 = as.integer(mt05d_w1),
         mt05d_w4 = as.integer(mt05d_w4),
         mt05d_w6 = as.integer(mt05d_w6),
         mtz05jz_w1 = as.integer(mtz05jz_w1),
         mtz05jz_w4 = as.integer(mtz05jz_w4),
         mtz05jz_w6 = as.integer(mtz05jz_w6))

done <- done %>% 
  replace_with_na(replace = list(plsecpr_w1 = c(-111, -222, -333, -444, -555, -666, -777, -888, -999)))
done <- done %>% 
  replace_with_na(replace = list(plsecpr_w4 = c(-111, -222, -333, -444, -555, -666, -777, -888, -999)))
done <- done %>% 
  replace_with_na(replace = list(plsecpr_w6 = c(-111, -222, -333, -444, -555, -666, -777, -888, -999)))
done <- done %>% 
  replace_with_na(replace = list(pleacpr_w1 = c(-111, -222, -333, -444, -555, -666, -777, -888, -999)))
done <- done %>% 
  replace_with_na(replace = list(plsacpr_w4 = c(-111, -222, -333, -444, -555, -666, -777, -888, -999)))
done <- done %>% 
  replace_with_na(replace = list(plsacpr_w6 = c(-111, -222, -333, -444, -555, -666, -777, -888, -999)))
done <- done %>% 
  replace_with_na(replace = list(plspr_mean_w1 = c(-111, -222, -333, -444, -555, -666, -777, -888, -999)))
done <- done %>% 
  replace_with_na(replace = list(plspr_mean_w4 = c(-111, -222, -333, -444, -555, -666, -777, -888, -999)))
done <- done %>% 
  replace_with_na(replace = list(plspr_mean_w6 = c(-111, -222, -333, -444, -555, -666, -777, -888, -999)))
#done <- done %>% 
#  mutate(mtz05_mean_w1 = as.numeric(mtz05_mean_w1),
 #        mtz05_mean_w4 = as.numeric(mtz05_mean_w5),
  #       mtz05_mean_w6 = as.numeric(mtz05_mean_w6),
   #      plspr_mean_w1 = as.numeric(plspr_mean_w1),
    #     plspr_mean_w4 = as.numeric(plspr_mean_w4),
     #    plspr_mean_w6 = as.numeric(plspr_mean_w6))

```




